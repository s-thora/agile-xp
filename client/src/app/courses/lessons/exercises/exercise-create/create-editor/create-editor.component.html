<div [formGroup]="controlContainer.control" class="mat-elevation-z2 card">

  <h3>Source code</h3>

  <div formArrayName="exerciseTests" class="env">
    <mat-tab-group>
      <mat-tab *ngFor="let test of form.controls.exerciseTests.controls; let i = index;">
        <div [formGroupName]="i">
          <ng-template mat-tab-label>
            {{ test.value.filename }}
            <button mat-icon-button type="button">
              <mat-icon (click)="editFilename(test.controls.filename)">edit</mat-icon>
            </button>
            <button mat-icon-button type="button">
              <mat-icon (click)="remove(i)">clear</mat-icon>
            </button>
          </ng-template>
          <ng-template matTabContent>
            <div class="env__container">
              <ngx-monaco-editor [options]="editorOptions" formControlName="content" class="env__editor">
              </ngx-monaco-editor>
            </div>
          </ng-template>
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>
          <button mat-icon-button type="button">
            <mat-icon (click)="add()">add</mat-icon>
          </button>
        </ng-template>
      </mat-tab>
    </mat-tab-group>
  </div>

  <div>
    <h4>Shown source code</h4>

    <mat-form-field>
      <mat-select [formControl]="form.controls.shownTestsType.controls.chosen">
        <mat-option value="same">The same</mat-option>
        <mat-option value="custom">Custom</mat-option>
      </mat-select>
    </mat-form-field>

    <div *ngIf="form.controls.shownTestsType.controls.chosen.value === 'custom'">
      <div formArrayName="shownTests" class="env">
        <mat-tab-group>
          <mat-tab *ngFor="let test of form.controls.shownTests.controls; let i = index;">
            <div [formGroupName]="i">
              <ng-template mat-tab-label>
                {{ test.value.filename }}
                <button mat-icon-button type="button">
                  <mat-icon (click)="editFilename(test.controls.filename)">edit</mat-icon>
                </button>
                <button mat-icon-button type="button">
                  <mat-icon (click)="remove(i)">clear</mat-icon>
                </button>
              </ng-template>
              <ng-template matTabContent>
                <div class="env__container">
                  <ngx-monaco-editor [options]="editorOptions" formControlName="content" class="env__editor">
                  </ngx-monaco-editor>
                </div>
              </ng-template>
            </div>
          </mat-tab>
          <mat-tab>
            <ng-template mat-tab-label>
              <button mat-icon-button type="button">
                <mat-icon (click)="add()">add</mat-icon>
              </button>
            </ng-template>
          </mat-tab>
        </mat-tab-group>
      </div>
    </div>
  </div>

</div>